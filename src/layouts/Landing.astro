---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <section class="relative min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-black via-gray-900 to-black text-white overflow-hidden">
    <!-- Navbar -->
    <header class="absolute top-0 left-0 w-full flex justify-between items-center p-6">
      <div class="text-2xl font-bold">
        <!-- Logo placeholder -->
        <img src="/img/logo.png" alt="logo" class="w-20">
      </div>
      <nav class="space-x-6 m-6 hover:bg-[rgb(20,20,20)] w-40 h-10 flex justify-between items-center rounded-lg p-4 bg-transparent duration-75">
        <a href="/login" class="hover:text-blue-400">Login</a>
        <a href="/register" class="hover:text-blue-400">Register</a>
      </nav>
    </header>

    <!-- Main Content -->
    <div class="text-center">
      <h1 class="text-5xl md:text-6xl font-bold">
        One-click away from 
        <span id="lang-text" class="text-blue-400"></span>
      </h1>
      <p class="mt-6 text-lg text-gray-300">
        Learn languages faster. Practice smarter. Remember longer.
      </p>
      <div class="mt-8 space-x-4">
        <!-- Updated Get Started button -->
        <button 
          id="get-started-btn" 
          class="px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 transition"
        >
          Get Started
        </button>

        <a href="#features" class="px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-800 transition">
          Discover More
        </a>
      </div>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Lang cycle animation
      const langs = ["Spanish", "English", "Portuguese"];
      let i = 0;
      const langText = document.getElementById("lang-text");

      function updateLang() {
        if (!langText) return; // safeguard
        langText.textContent = langs[i];
        i = (i + 1) % langs.length;
      }
      updateLang(); // initial
      setInterval(updateLang, 5000); // change every 5s

      // Get Started button logic
      const getStartedBtn = document.getElementById("get-started-btn");
      getStartedBtn.addEventListener("click", () => {
        const isLoggedIn = localStorage.getItem("auth");      // true if user logged in
        const isVerified = localStorage.getItem("verified");  // true if user verified

        if (isLoggedIn) {
          if (isVerified === "true") {
            window.location.href = "/dashboard";   // ‚úÖ logged in + verified
          } else {
            window.location.href = "/verify";      // ‚ö†Ô∏è logged in but not verified
          }
        } else {
          window.location.href = "/login";         // üîí not logged in
        }
      });
    });
  </script>
</Layout>
